# javamid-vitrina

```text

order_items            orders                 users              baskets                 basket_items         products
+------------+         +---------------+      +-----------+      +----------------+      +-------------+      +-------------+
| id         |         | id            |      | id        |      | id             |      | id          |      | id          |
| user_id    |    1<-N | user_id       | 1<-N | name      | 1->1 | user_id        | 1->N | basket_id   | 1->N | image       |
| name       |         | order_item_id |      | basket_id | 1<-1 | basket_item_id | 1<-N | product_id  |      | name        |
| image      |         |               |      |           |      |                |      | quantity    |      | description |
| price      |         +---------------+      +-----------+      +----------------+      +-------------+      | price       |
| user_id    |                                                                                                |             |
| quantity   |                                                                                                +-------------+
| product_id |                                                                                             
+------------+                                                                                             


```


я не очень понял задание и решил, что в заказах надо хранить исторические данные, ведь у продукта может поменяться, например, цена, или продукт может вообще закончиться. а в заказе должны быть сохранены данные на момент заказа.

на вторую часть ( контроллеры ) у меня ушло 4 дня((
чаще всего приходилось бороться с ленивой загрузкой типа такой ошибки org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role:
javamid.vitrina.dao.User.orders: could not initialize proxy - no Session
иногда связанный список объектов просто оказывался пустым безо всяких ошибок.

для загрузки товаров в базу написана админка, которую надо вызвать по адресу 8080:/admin/upload
ей надо скормить zip архив содержащий файлы с картинками и csv файл с записями. возможно отсутствие картинок.
формат файла вот такой:
name, image, description, price
"Ноутбук Lenovo", , "нетипичный товар", 55000
"Книга ?Spring Boot?",, "очень интересная книжка", 1200
"кепка", "cap1.jfif", "кепка типа бейсболка", 500
"eщё кепка", "cap2.jfif", "кепка типа бейсболка", 510
пример для загрузки товаров лежит в папке   src/main/resources/static/example

при старте приложения в первый раз создается один пользователь и его корзина.
планировал возможность многих пользователей.

использовал готовые шаблоны, изменил в них только пути к картинкам.


Функциональность
1 Веб-приложение представляет собой витрину товаров, которые пользователь может положить в корзину и купить.
2 Приложение состоит из шести основных частей (модулей): страницы витрины товаров, доступных для просмотра и покупки; страницы товара; страницы корзины покупателя; страницы всех заказов; страницы заказа; сервис покупки.
3 Страница витрины товаров ? это веб-страница (html + javascript), на которой представлены:
- список товаров, доступных для заказа (картинка, название, цена, кнопка добавления в корзину/удаления из неё, кнопка изменения количества товара в корзине);
- список товаров может быть представлен в любом виде (списком, плиткой);
- есть пагинация (по 10, 20, 50, 100 товаров);
- сверху строка поиска с фильтрацией по названию (можно просто по вхождению слова в название/описание товара);
- сверху доступна сортировка по цене, алфавиту.
  4 При нажатии на товар происходит переход на веб-страницу карточки товара, на которой представлены:
- название, картинка, описание товара, возможность положить товар в корзину/удалить его, изменить количество в корзине;
- цена товара.
  5 В правом верхнем углу любой веб-страницы есть кнопка перехода в корзину, которая представляет собой:
- веб-страницу со списком положенных в неё товаров, их количеством, ценой каждого товара и общей ценой всей корзины;
- есть возможность удалить товар из корзины, изменить его количество;
- есть кнопка оформления заказа.
  6 В правом верхнем углу любой веб-страницы есть кнопка перехода на страницу заказов, которая представляет собой:
- веб-страницу со списком всех оформленных заказов, суммой каждого заказа и общей суммой всех заказов;
- при нажатии на заказ появляется веб-страница совершённого заказа.
  7 На веб-странице заказа представлен список купленных товаров (картинка, название, цена).
  8 При нажатии на кнопку оформления заказа происходит эмуляция оформления заказа, при этом происходит переход на страницу оформленного заказа.
  9 Есть возможность загрузки списка товаров на витрину товаров (на ваше усмотрение: можно сделать веб-интерфейс добавления товара, импорт из файла и так далее).








